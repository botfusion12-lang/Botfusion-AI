<!DOCTYPE html>
<html lang="en">
<head>
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#2a2a2a">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Botfusion AI</title>

<style>
/* ================= ROOT THEMES ================= */
:root {
  --bg: #2a2a2a;
  --panel: #1f1f1f;
  --text: #ffffff;
  --accent: #10a37f;
}
body.light { --bg:#f4f4f4; --panel:#ffffff; --text:#000; --accent:#007bff; }
body.blue { --bg:#0f172a; --panel:#020617; --text:#e5e7eb; --accent:#38bdf8; }
body.purple { --bg:#2e1065; --panel:#3b0764; --text:#faf5ff; --accent:#c084fc; }
body.green { --bg:#022c22; --panel:#064e3b; --text:#ecfdf5; --accent:#34d399; }

/* ================= BASE ================= */
* { box-sizing: border-box; }
body {
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background:var(--bg);
  color:var(--text);
}

/* ================= HEADER ================= */
.header {
  display:flex;
  align-items:center;
  gap:12px;
  padding:14px;
  background:var(--panel);
}
.hamburger {
  font-size:24px;
  cursor:pointer;
}

/* ================= SIDEBAR ================= */
.sidebar {
  position:fixed;
  top:0;
  left:-100%;
  width:280px;
  height:100vh;
  background:#111;
  padding:16px;
  transition:0.3s;
  z-index:1000;
}
.sidebar.open { left:0; }
.sidebar button, .sidebar select {
  width:100%;
  padding:10px;
  margin:6px 0;
  background:#2a2a2a;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.sidebar .close {
  background:#900;
  margin-bottom:10px;
}

/* ================= SCREENS ================= */
.screen { display:none; padding:16px; }
.screen.active { display:block; }

/* ================= HOME ================= */
.card {
  background:var(--panel);
  padding:16px;
  border-radius:10px;
  margin-bottom:10px;
}

/* ================= CHAT ================= */
.chat-box {
  height:60vh;
  overflow-y:auto;
}
.msg {
  margin:8px 0;
  padding:10px;
  border-radius:10px;
  max-width:80%;
}
.user { background:var(--accent); margin-left:auto; }
.bot { background:#444; }
.input-bar {
  display:flex;
  gap:8px;
}
input {
  flex:1;
  padding:10px;
  border-radius:8px;
  border:none;
}

/* ================= PROFILE ================= */
.profile img {
  width:80px;
  border-radius:50%;
}

/* ================= FOOTER ================= */
footer {
  text-align:center;
  opacity:0.5;
  font-size:12px;
  margin-top:20px;
}
</style>
</head>

<body class="dark">

<!-- HEADER -->
<div class="header">
  <div class="hamburger" onclick="toggleSidebar()">‚ò∞</div>
  <h3>Botfusion AI</h3>
</div>

<!-- SIDEBAR -->
<div id="sidebar" class="sidebar">
  <button class="close" onclick="toggleSidebar()">‚úñ Close</button>
  <button onclick="openScreen('home')">üè† Home</button>
  <button onclick="openScreen('chat')">üí¨ Start Chat</button>
  <button onclick="openScreen('profile')">üë§ Profile</button>
  <button onclick="openScreen('settings')">‚öô Settings</button>
  <hr>
  <button onclick="googleLogin()">üîê Google Login</button>
  <button onclick="logout()">üö™ Logout</button>
</div>

<!-- HOME -->
<div id="home" class="screen active">
  <div class="card">‚ú® Chat with AI</div>
  <div class="card">üé® Generate Images</div>
  <div class="card">üåç 100+ Languages</div>
</div>

<!-- CHAT -->
<div id="chat" class="screen">
  <div class="chat-box" id="chatBox"></div>
  <div class="input-bar">
    <input id="chatInput" placeholder="Type message...">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<!-- PROFILE -->
<div id="profile" class="screen profile">
  <h3>Your Profile</h3>
  <div id="profileInfo"></div>
</div>

<!-- SETTINGS -->
<div id="settings" class="screen">
  <h3>Settings</h3>
  <label>Theme</label>
  <select onchange="changeTheme(this.value)">
    <option value="dark">Dark</option>
    <option value="light">Light</option>
    <option value="blue">Blue</option>
    <option value="purple">Purple</option>
    <option value="green">Green</option>
  </select>
  <label>Language</label>
  <select>
    <option>English</option>
    <option>Hindi</option>
    <option>Marathi</option>
    <option>Spanish</option>
    <option>French</option>
    <!-- you can add up to 100+ -->
  </select>
</div>

<footer>Botfusion AI ¬© 2026</footer>

<!-- ================= FIREBASE + BACKEND ================= -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged }
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDA62eN5MEjX9Z-gw6w9UuR8L-Ke_6J7eE",
  authDomain: "botfusion-ai-bd6d0.firebaseapp.com",
  projectId: "botfusion-ai-bd6d0",
  storageBucket: "botfusion-ai-bd6d0.firebasestorage.app",
  messagingSenderId: "730477136598",
  appId: "1:730477136598:web:c6b4e0d495744d12079777"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

window.googleLogin = async () => signInWithPopup(auth, provider);
window.logout = async () => signOut(auth);

onAuthStateChanged(auth, user => {
  if(user){
    profileInfo.innerHTML = `
      <img src="${user.photoURL}">
      <p>${user.displayName}</p>
      <p>${user.email}</p>
    `;
  }
});

/* ================= UI LOGIC ================= */
window.toggleSidebar = () =>
  document.getElementById("sidebar").classList.toggle("open");

window.openScreen = id => {
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  toggleSidebar();
};

window.changeTheme = t => document.body.className = t;

/* ================= CHAT BACKEND ================= */
window.sendMessage = async () => {
  const input = chatInput.value;
  if(!input) return;
  chatBox.innerHTML += `<div class="msg user">${input}</div>`;
  chatInput.value = "";

  chatBox.innerHTML += `<div class="msg bot">Typing...</div>`;
  const res = await fetch("http://localhost:5000/chat", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ message: input })
  });
  const data = await res.json();
  chatBox.lastChild.innerText = data.reply;
};
</script>

</body>
</html>
