<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BotFusion AI</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:Arial,sans-serif; }
  body { background:#121212; color:#fff; }

  header {
    display:flex; justify-content:space-between; align-items:center;
    padding:15px 20px; background:#00a77b; position:fixed; top:0; width:100%; z-index:10;
  }
  header .hamburger, header .profile { cursor:pointer; font-size:1.5rem; color:#fff; }
  header h1 { font-size:1.2rem; color:#fff; }

  .sidebar {
    position:fixed; top:0; left:-250px; width:250px; height:100%;
    background:#1e1e1e; transition:0.3s; padding-top:60px; z-index:9;
  }
  .sidebar.active { left:0; }
  .sidebar button {
    display:flex; align-items:center; width:100%;
    padding:12px 20px; background:none; border:none; color:#fff;
    text-align:left; font-size:1rem; cursor:pointer; border-radius:0;
  }
  .sidebar button:hover { background:#333; }
  .sidebar button svg { margin-right:12px; width:20px; height:20px; fill:#fff; }
  .sidebar .bottom { position:absolute; bottom:20px; width:100%; }

  main { padding:100px 20px 80px; }
  main h2 { font-size:1.4rem; margin-bottom:20px; text-align:center; }
  .card {
    background:#1e1e1e; padding:15px 20px; margin:10px 0;
    border-radius:15px; cursor:pointer; transition:0.2s;
    display:flex; align-items:center;
  }
  .card:hover { background:#333; }
  .card svg { margin-right:15px; width:24px; height:24px; fill:#00a77b; }

  .chat-input {
    position:fixed; bottom:0; left:0; width:100%;
    display:flex; background:#1e1e1e; padding:10px 20px; z-index:10;
  }
  .chat-input input {
    flex:1; padding:12px 20px; border:none; border-radius:25px 0 0 25px;
    outline:none; background:#2a2a2a; color:#fff; font-size:1rem;
  }
  .chat-input button {
    padding:0 20px; border:none; border-radius:0 25px 25px 0;
    background:#00a77b; color:#fff; cursor:pointer; font-size:1rem;
  }

  /* Modals for settings / profile */
  .modal {
    display:none; position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:15;
  }
  .modal.active { display:flex; }
  .modal-content {
    background:#1e1e1e; padding:20px; border-radius:15px; width:90%; max-width:400px;
  }
  .modal-content h3 { margin-bottom:15px; }
  .modal-content button { margin-top:10px; padding:10px 15px; border:none; border-radius:8px; background:#00a77b; color:#fff; cursor:pointer; }
</style>
</head>
<body>

<header>
  <div class="hamburger">
    <svg viewBox="0 0 100 80" width="24" height="24"><rect width="100" height="15"></rect><rect y="30" width="100" height="15"></rect><rect y="60" width="100" height="15"></rect></svg>
  </div>
  <h1>BotFusion</h1>
  <div class="profile">
    <svg viewBox="0 0 24 24"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"/></svg>
  </div>
</header>

<div class="sidebar">
  <button data-action="new-chat">New Chat</button>
  <button data-action="history">History</button>
  <button data-action="summarize">Summarize</button>
  <button data-action="analyze">Analyze</button>
  <button data-action="create">Create Image</button>
  <button data-action="list">Make List</button>
  <button data-action="code">Coding</button>
  <div class="bottom">
    <button data-action="settings">Settings</button>
    <button data-action="account">Account</button>
  </div>
</div>

<main>
  <h2>How can I help you today?</h2>
  <div class="card" data-card="info">Explain quantum computing in simple terms</div>
  <div class="card" data-card="story">Write a creative story about a robot</div>
  <div class="card" data-card="code">Help me debug my code</div>
  <div class="card" data-card="language">What's the best way to learn a new language?</div>
</main>

<div class="chat-input">
  <input type="text" id="chatInput" placeholder="Message BotFusion...">
  <button id="sendBtn">&#8593;</button>
</div>

<!-- Modals -->
<div class="modal" id="settingsModal">
  <div class="modal-content">
    <h3>Settings</h3>
    <button onclick="closeModal('settingsModal')">Close</button>
  </div>
</div>
<div class="modal" id="accountModal">
  <div class="modal-content">
    <h3>Account</h3>
    <button onclick="closeModal('accountModal')">Close</button>
  </div>
</div>

<script>
  const sidebar = document.querySelector('.sidebar');
  const hamburger = document.querySelector('.hamburger');
  const profile = document.querySelector('.profile');
  const chatInput = document.getElementById('chatInput');
  const sendBtn = document.getElementById('sendBtn');
  const main = document.querySelector('main');

  // Sidebar toggle
  hamburger.addEventListener('click', () => sidebar.classList.toggle('active'));
  document.addEventListener('click', e => {
    if (!sidebar.contains(e.target) && !hamburger.contains(e.target)) sidebar.classList.remove('active');
  });

  // Sidebar buttons
  sidebar.querySelectorAll('button').forEach(btn => {
    btn.addEventListener('click', () => {
      const action = btn.dataset.action;
      if (action === 'settings') openModal('settingsModal');
      else if (action === 'account') openModal('accountModal');
      else if (action === 'create') createImage();
      else sendFeatureRequest(action);
      sidebar.classList.remove('active');
    });
  });

  // Profile click
  profile.addEventListener('click', () => openModal('accountModal'));

  // Cards click
  document.querySelectorAll('.card').forEach(card => {
    card.addEventListener('click', () => chatInput.value = card.textContent);
  });

  function openModal(id) { document.getElementById(id).classList.add('active'); }
  function closeModal(id) { document.getElementById(id).classList.remove('active'); }

  // Chat input send
  sendBtn.addEventListener('click', sendMessage);
  chatInput.addEventListener('keypress', e => { if (e.key === 'Enter') sendMessage(); });

  // Send chat message to backend
  async function sendMessage() {
    const text = chatInput.value.trim();
    if (!text) return;
    addMessage('user', text);
    chatInput.value = '';

    try {
      const res = await fetch('/api/chat', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ message: text })
      });
      const data = await res.json();
      addMessage('bot', data.reply);
    } catch(err) {
      console.error(err);
      addMessage('bot', 'Error connecting to backend.');
    }
  }

  // Send other feature requests (summarize, analyze, make list)
  async function sendFeatureRequest(feature) {
    const text = chatInput.value.trim();
    if (!text) return;
    addMessage('user', text);

    try {
      const res = await fetch(`/api/chat?feature=${feature}`, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ message:text })
      });
      const data = await res.json();
      addMessage('bot', data.reply);
    } catch(err) {
      console.error(err);
      addMessage('bot','Error connecting to backend.');
    }
  }

  // Image generation
  async function createImage() {
    const prompt = chatInput.value.trim();
    if (!prompt) return;
    addMessage('user', prompt);

    try {
      const res = await fetch('/api/image', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ prompt })
      });
      const data = await res.json();
      addMessage('bot', 'üñºÔ∏è Image generated!');
      // You can append image to chat
      const img = document.createElement('img');
      img.src = data.url;
      img.style.maxWidth = '100%';
      img.style.borderRadius = '12px';
      main.appendChild(img);
    } catch(err) {
      console.error(err);
      addMessage('bot','Error generating image.');
    }
  }

  // Add message to chat
  function addMessage(sender, text) {
    const msg = document.createElement('div');
    msg.classList.add('card', sender);
    msg.textContent = text;
    main.appendChild(msg);
    main.scrollTop = main.scrollHeight;
  }
                 </script>>

</body>
</html>
